{
  "info": {
    "_postman_id": "e75a1ad5-d310-487f-96d0-62f1b2e31e37",
    "name": "Delegate requests Copy",
    "schema": "https://schema.getpostman.com/json/collection/v2.0.0/collection.json"
  },
  "item": [
    {
      "name": "Login Prod",
      "event": [
        {
          "listen": "prerequest",
          "script": {
            "id": "cb22c5de-964e-4534-8b2d-7cd0094ade4b",
            "exec": [
              "const usersInfo = JSON.parse(environment.usersInfo);",
              "postman.setEnvironmentVariable(\"saUsername\", usersInfo.SUPER_ADMIN.username);",
              "postman.setEnvironmentVariable(\"saPassword\", usersInfo.SUPER_ADMIN.password);"
            ],
            "type": "text/javascript"
          }
        },
        {
          "listen": "test",
          "script": {
            "id": "f60bcf25-fb43-44c5-8673-27e1a03e7921",
            "exec": [
              "try{",
              "    tests[\"Login as \" + environment.saUsername + \". Status code is 200\"] = responseCode.code === 200;",
              "",
              "    var body = JSON.parse(responseBody);",
              "    postman.setEnvironmentVariable(\"superAdminTokenID\", body.access_token);",
              "    pm.cookies.clear();",
              "}",
              "catch(err){",
              "    console.log(err);",
              "    console.log(responseBody);",
              "    tests[\"Data in response does not exist\"] = false;",
              "}"
            ],
            "type": "text/javascript"
          }
        }
      ],
      "_postman_id": "492db626-13ad-45bc-a10f-1440bc241863",
      "protocolProfileBehavior": {
        "disableBodyPruning": true
      },
      "request": {
        "method": "POST",
        "header": [],
        "body": {
          "mode": "urlencoded",
          "urlencoded": [
            {
              "key": "username",
              "type": "text",
              "value": "devs+salesforce@crimsoneducation.org"
            },
            {
              "key": "password",
              "type": "text",
              "value": "1aPWMb8+Hb}Ypx<Mi%k5"
            },
            {
              "key": "grant_type",
              "type": "text",
              "value": "password"
            },
            {
              "key": "client_id",
              "type": "text",
              "value": "{{auth0_client_id}}"
            },
            {
              "key": "audience",
              "type": "text",
              "value": "https://api.crimsoneducation.org"
            },
            {
              "key": "scope",
              "type": "text",
              "value": "openid email"
            },
            {
              "key": "client_secret",
              "type": "text",
              "value": "{{auth0_client_secret}}",
              "disabled": true
            }
          ],
          "options": {
            "urlencoded": {}
          }
        },
        "url": "https://crimsonconsulting.au.auth0.com/oauth/token",
        "description": "Login as a Super Admin, and retrieve the TokenID, which is going to be used in other tests to perform actions in LMS."
      },
      "response": []
    },
    {
      "name": "createNewUserInvitation Prod",
      "event": [
        {
          "listen": "test",
          "script": {
            "id": "92e8f664-c529-47ad-8401-f5d8aeb458ac",
            "exec": [
              "try{",
              "    tests[\"Response status code is 200\"] = responseCode.code === 200;",
              "}",
              "catch(err){",
              "    console.log(\"Error Message: \"+err);",
              "    console.log(\"Response Body: \"+responseBody);",
              "    tests[\"Request call or validation failed\"] = false;",
              "",
              "}"
            ],
            "type": "text/javascript"
          }
        },
        {
          "listen": "prerequest",
          "script": {
            "id": "494d8a8f-6081-40c4-9c8f-27993fcee84f",
            "exec": [
              ""
            ],
            "type": "text/javascript"
          }
        }
      ],
      "_postman_id": "d724b4dc-7df4-43a6-8f74-51945f41bb4a",
      "protocolProfileBehavior": {
        "disableBodyPruning": true
      },
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Authorization",
            "type": "text",
            "value": "bearer {{superAdminTokenID}}"
          },
          {
            "key": "Content-Type",
            "type": "text",
            "value": "application/json"
          }
        ],
        "body": {
          "mode": "graphql",
          "graphql": {
            "query": "mutation createNewUserInvitation(\n  $firstName: String!,\n  $lastName: String!,\n  $email: String!,\n  $roleIds: [String]!,\n  $salesforceContactId: String,\n  $salesforceUserId: String,\n  $password: String\n) {\n  createNewUserInvitation(\n    firstName: $firstName,\n    lastName: $lastName,\n    email: $email,\n    roleIds: $roleIds,\n    salesforceContactId: $salesforceContactId,\n    salesforceUserId: $salesforceUserId,\n    password: $password\n  )\n}",
            "variables": "{\n    \"firstName\": \"Yusei\",\n    \"lastName\": \"Ishizaka\",\n    \"email\": \"yusei803@hotmail.com\",\n    \"roleIds\": \"['STUDENT']\",\n    \"salesforceContactId\": \"0037F0000289jVNQAY\"\n}"
          },
          "options": {
            "graphql": {}
          }
        },
        "url": "https://user-service.prod.crimsoneducation.io/graphql"
      },
      "response": []
    },
    {
      "name": "sync/user Local",
      "event": [
        {
          "listen": "test",
          "script": {
            "id": "585d8266-4e25-4e6b-a7e6-df2acba1c998",
            "exec": [
              "try{",
              "    tests[\"Response status code is 200\"] = responseCode.code === 200;",
              "}",
              "catch(err){",
              "    console.log(\"Error Message: \"+err);",
              "    console.log(\"Response Body: \"+responseBody);",
              "    tests[\"Request call or validation failed\"] = false;",
              "",
              "}"
            ],
            "type": "text/javascript"
          }
        },
        {
          "listen": "prerequest",
          "script": {
            "id": "8858e51f-1463-4f2c-8a6e-e9b08dcbbedc",
            "exec": [
              ""
            ],
            "type": "text/javascript"
          }
        }
      ],
      "_postman_id": "83d6d6a4-bbae-40d6-b8fe-665993cf7bc3",
      "protocolProfileBehavior": {
        "disableBodyPruning": true
      },
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Authorization",
            "type": "text",
            "value": "Bearer 6Cel800D0p0000000Yom8880p00000091j4k6M7Ff4rm0yuVx4K3jsvpFnHAncxWZK6wLfpO1ufpHyAtkJTkRCWTrD9fkYjmOzQLb4rrPvm"
          },
          {
            "key": "Content-Type",
            "type": "text",
            "value": "application/json"
          }
        ],
        "body": {
          "mode": "urlencoded",
          "urlencoded": [],
          "options": {
            "urlencoded": {}
          }
        },
        "url": "http://localhost:3011/sync/auth0-5eaba86a1250480bd3eae6b2"
      },
      "response": []
    },
    {
      "name": "sync/user Prod",
      "event": [
        {
          "listen": "test",
          "script": {
            "id": "3649728c-fe33-415b-88a9-e3ee49a6d7f4",
            "exec": [
              "try{",
              "    tests[\"Response status code is 200\"] = responseCode.code === 200;",
              "}",
              "catch(err){",
              "    console.log(\"Error Message: \"+err);",
              "    console.log(\"Response Body: \"+responseBody);",
              "    tests[\"Request call or validation failed\"] = false;",
              "",
              "}"
            ],
            "type": "text/javascript"
          }
        },
        {
          "listen": "prerequest",
          "script": {
            "id": "b02dc8ff-974b-4183-97d7-8669ba622837",
            "exec": [
              ""
            ],
            "type": "text/javascript"
          }
        }
      ],
      "_postman_id": "92aff8cd-55fa-4676-b0b5-e62e2e6f1323",
      "protocolProfileBehavior": {
        "disableBodyPruning": true
      },
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Authorization",
            "type": "text",
            "value": "Bearer Zzx7ZAhhehonb52C"
          },
          {
            "key": "Content-Type",
            "type": "text",
            "value": "application/json"
          }
        ],
        "body": {
          "mode": "urlencoded",
          "urlencoded": [],
          "options": {
            "urlencoded": {}
          }
        },
        "url": "https://delegate.prod.crimsoneducation.io/sync/auth0-5dae5d3f7448cb0c775fc027"
      },
      "response": []
    }
  ]
}